<div class="container" style="margin-top:40px;">
  <div class="row" *ngIf="user">
    <div>
      <article style="width:80%;margin:auto">
        <header>
          <h2>
            Hello, <div style="display: inline-block;"> {{user.username}}</div>
          </h2>

        </header>
        <div class="address-form" style="display: flex;align-items: center;justify-content: center;">
          <div style="width: 50%;">
            <label for="addressType">Address Type:</label>
            <select id="addressType" [(ngModel)]="addressType">
              <option value="home">Home</option>
              <option value="work">Work</option>
            </select>
          </div>
          <div style="width: 120%;margin-left:10%">
            <label for="address">Address:</label>
            <input type="text" id="address" [(ngModel)]="address" placeholder="Enter your address" />
          </div>
        </div>
        <button type="button" (click)="saveAddress()">Save Address</button>
        <br>
        <h3>Saved Addresses</h3>
        <p><strong>Home Address:</strong> {{ user.homeAddress || 'Not provided' }}</p>
        <p><strong>Work Address:</strong> {{ user.workAddress || 'Not provided' }}</p>
        <br>
        <br>
        <p class="grey">There is no news on your account</p>
        <div class="flex-row">
          <a class="account-buttons" (click)="logout()">Log out</a>
          <a class="account-buttons" (click)="deleteAccount()">Delete my account</a>
        </div>
      </article>
      <article style="width:80%;margin:auto;margin-top:3%;margin-bottom:1.5%;">
        <header>
          <h2>Your Trips</h2>
        </header>
        <div *ngIf="bikeRoutes.length > 0; else noRoutes">
          <ul>
            <li *ngFor="let route of bikeRoutes">
              <div class="flex-row" style="justify-content: space-between;margin-top:10px">
                <div>
                  <strong>From:</strong> {{ route.origin }} <br>
                  <strong>To:</strong> {{ route.destination }} <br>
                  <strong>Saved on:</strong> {{ route.createdAt | date:'medium' }}
                </div>
                <div>
                  <div class="star-rating">
                    <span *ngFor="let star of [1, 2, 3, 4, 5]" (click)="setRating(route._id, star)"
                      (mouseenter)="setHoveredRating(route._id, star)" (mouseleave)="clearHoveredRating(route._id)"
                      [class.filled]="star <= (hoveredRatings[route._id] || ratings[route._id])">
                      â˜…
                    </span>
                  </div>
                  <a class="account-buttons" [routerLink]="['/home']"
                    [queryParams]="{ origin: route.origin, destination: route.destination }">
                    View route
                  </a>
                  <br>
                  <a class="account-buttons" (click)="deleteRoute(route._id)">
                    Delete
                  </a>
                </div>
              </div>
            </li>
          </ul>
        </div>
        <ng-template #noRoutes>
          <p class="grey">You haven't saved any routes yet.</p>
        </ng-template>
      </article>
    </div>
  </div>
</div>